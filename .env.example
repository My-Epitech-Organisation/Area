# ============================================================================
# AREA Project - Environment Variables Template
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env with real credentials to git!
# ============================================================================

# ============================================================================
# 1. DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================
DB_USER=area_user
DB_PASSWORD=change-this-secure-password
DB_NAME=area_db
DB_HOST=db
DB_PORT=5433                          # EXTERNAL port mapping (for tools outside Docker)
DB_PORT_INTERNAL=5432                 # INTERNAL port (for Django inside container)

# ============================================================================
# 2. REDIS CONFIGURATION
# ============================================================================
REDIS_HOST=redis
REDIS_PORT=6379                       # EXTERNAL port mapping
REDIS_PORT_INTERNAL=6379              # INTERNAL port (same as external for Redis)
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT_INTERNAL}/0

# ============================================================================
# 3. DJANGO BACKEND CONFIGURATION
# ============================================================================
BACKEND_PORT=8080                     # EXTERNAL port mapping
BACKEND_PORT_INTERNAL=8080            # INTERNAL port (Django runserver)
DJANGO_SETTINGS_MODULE=area_project.settings

# ============================================================================
# 4. CELERY FLOWER CONFIGURATION
# ============================================================================
FLOWER_PORT=5566                      # EXTERNAL port mapping
FLOWER_PORT_INTERNAL=5566             # INTERNAL port (same as external)

# ============================================================================
# 5. FRONTEND VITE CONFIGURATION
# ============================================================================
FRONTEND_DEV_PORT=5173                # EXTERNAL port mapping
FRONTEND_DEV_PORT_INTERNAL=5173       # INTERNAL port (same as external)

# SECRET_KEY: Generate a secure random key for production
# Use: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=your-very-secret-django-key-change-in-production

# DEBUG: Set to False in production!
DEBUG=True

# ENVIRONMENT: Defines which Django settings module to load
# - local      : Local development (venv, SQLite, no Docker)
# - docker     : Docker development (PostgreSQL, Redis, hot reload, DEBUG=True)
# - production : Docker production (PostgreSQL, Redis, security hardened, DEBUG=False)
ENVIRONMENT=docker

# ============================================================================
# 4. DJANGO SUPERUSER (Optional - auto-created on first startup if set)
# ============================================================================
DJANGO_SUPERUSER_EMAIL=admin@areaction.app
DJANGO_SUPERUSER_PASSWORD=change-this-secure-password

# ============================================================================
# 5. LOGGING CONFIGURATION
# ============================================================================
LOG_LEVEL=INFO
DJANGO_LOG_FILE=/app/logs/django.log

# ============================================================================
# 6. JWT AUTHENTICATION
# ============================================================================
# JWT_SIGNING_KEY: Used to sign JWT tokens. Generate a secure random key!
JWT_SIGNING_KEY=your-jwt-signing-key-change-in-production

# ============================================================================
# 7. EMAIL CONFIGURATION (SMTP Gmail)
# ============================================================================
# To use Gmail, create an App Password:
# 1. Go to https://myaccount.google.com/security
# 2. Enable 2-Step Verification
# 3. Go to https://myaccount.google.com/apppasswords
# 4. Create an app password and use it below
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_USE_SSL=False
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-gmail-app-password-here
DEFAULT_FROM_EMAIL=your-email@gmail.com

# ============================================================================
# 8. FRONTEND CONFIGURATION
# ============================================================================
FRONTEND_PORT=8081                    # EXTERNAL port mapping (for Nginx in prod)
FRONTEND_PORT_INTERNAL=80             # INTERNAL port (Nginx container internal port)
FRONTEND_URL=http://localhost:${FRONTEND_PORT}  # Use the external port for client-side URLs

# Vite environment variables (must be prefixed with VITE_ to be exposed to client)
# In development: http://localhost:${BACKEND_PORT} (external port)
# In production: https://areaction.app/api
VITE_API_BASE=http://localhost:${BACKEND_PORT}

# ============================================================================
# 9. CORS AND SECURITY SETTINGS
# ============================================================================
# ALLOWED_HOSTS: Comma-separated list of allowed host/domain names
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0,10.0.2.2

# CORS_ALLOW_ALL_ORIGINS: Set to False in production and configure specific origins
CORS_ALLOW_ALL_ORIGINS=True

# Security flags (set to True in production with HTTPS)
SECURE_SSL_REDIRECT=False
SESSION_COOKIE_SECURE=False
CSRF_COOKIE_SECURE=False

# ============================================================================
# 10. OAUTH2 CONFIGURATION (External Service Authentication)
# ============================================================================

# --- Google OAuth2 ---
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:${BACKEND_PORT}/auth/google/callback/

# --- GitHub OAuth2 ---
# Get credentials from: https://github.com/settings/developers
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_REDIRECT_URI=http://localhost:${BACKEND_PORT}/auth/oauth/github/callback/

# --- Twitch OAuth2 ---
# Get credentials from: https://dev.twitch.tv/console/apps
TWITCH_CLIENT_ID=your-twitch-client-id
TWITCH_CLIENT_SECRET=your-twitch-client-secret
TWITCH_REDIRECT_URI=http://localhost:8080/auth/oauth/twitch/callback/

# ============================================================================
# 11. WEBHOOK SECRETS (for validating incoming webhooks)
# ============================================================================
# Generate secure random strings for each webhook secret
# Use: openssl rand -hex 32
GITHUB_WEBHOOK_SECRET=dev_secret_github_123
GMAIL_WEBHOOK_SECRET=dev_secret_gmail_123
TWITCH_WEBHOOK_SECRET=dev_secret_twitch_123
WEBHOOK_SECRET=dev_secret_webhook_123

# ============================================================================
# 12. CELERY CONFIGURATION (Task Queue)
# ============================================================================
CELERY_TIMEZONE=UTC
# CELERY_TASK_ALWAYS_EAGER: If True, tasks execute synchronously (useful for testing)
CELERY_TASK_ALWAYS_EAGER=False

# ============================================================================
# 13. MONITORING (Flower - Celery Task Monitor)
# ============================================================================
FLOWER_PORT=5566

# ============================================================================
# 14. DOCKER CONFIGURATION
# ============================================================================
COMPOSE_PROJECT_NAME=area

# ============================================================================
# PRODUCTION DEPLOYMENT NOTES
# ============================================================================
# When deploying to production:
# 1. Set DEBUG=False
# 2. Set ENVIRONMENT=production
# 3. Generate new SECRET_KEY and JWT_SIGNING_KEY
# 4. Set SECURE_SSL_REDIRECT=True
# 5. Set SESSION_COOKIE_SECURE=True
# 6. Set CSRF_COOKIE_SECURE=True
# 7. Set CORS_ALLOW_ALL_ORIGINS=False
# 8. Update ALLOWED_HOSTS with your production domain
# 9. Update all OAuth redirect URIs with production URLs
# 10. Update VITE_API_BASE with production API URL
# 11. Generate strong webhook secrets
# 12. Use real OAuth credentials (not dev placeholders)
# ============================================================================
